<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" id="Definitions_156dsai" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="3.4.1">
  <bpmn:collaboration id="Collaboration_1hs8648">
    <bpmn:participant id="Participant_1uw6mwb" name="E-Ticketing" processRef="order-ticket" />
    <bpmn:participant id="Participant_07xny93" name="Payment Service" processRef="Process_0hpcy7g" />
    <bpmn:messageFlow id="MessageFlow_1cb518o" sourceRef="Participant_07xny93" targetRef="Task_1t6cbua" />
    <bpmn:messageFlow id="MessageFlow_01s67kx" sourceRef="IntermediateThrowEvent_06egu93" targetRef="Participant_07xny93" />
  </bpmn:collaboration>
  <bpmn:process id="order-ticket" isExecutable="true">
    <bpmn:laneSet id="LaneSet_16dfbs5">
      <bpmn:lane id="Lane_0kkvo4a" name="Sistem">
        <bpmn:flowNodeRef>ExclusiveGateway_09461ow</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_0l9nh3t</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>StartEvent_1gtt030</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_0npfejk</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_1t6cbua</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_1ydkhpd" name="Pengguna">
        <bpmn:flowNodeRef>Task_03fw2nn</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>ExclusiveGateway_10i0yyv</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>EndEvent_1o71zjf</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_0fydn7d</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>IntermediateThrowEvent_06egu93</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:userTask id="Task_03fw2nn" name="Melakukan pembayaran">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="order_id" label="Order Id" type="long" />
          <camunda:formField id="total_price" label="Total Price" type="long" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_0uftjt5</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_1pm02ma</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_190mrgl</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="ExclusiveGateway_09461ow" name="Pembayaran berhasil?">
      <bpmn:incoming>SequenceFlow_0ph8dry</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0w88pvx</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_16fsge3</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="Task_0l9nh3t" name="Menampilkan halaman pembayaran gagal">
      <bpmn:incoming>SequenceFlow_0w88pvx</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1yyf6il</bpmn:outgoing>
    </bpmn:task>
    <bpmn:exclusiveGateway id="ExclusiveGateway_10i0yyv" name="Pengguna mencoba pembayaran kembali?">
      <bpmn:incoming>SequenceFlow_1yyf6il</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1pm02ma</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_0niwhzd</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="EndEvent_1o71zjf">
      <bpmn:incoming>SequenceFlow_14qst42</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_0niwhzd</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_16bd1x7" sourceRef="StartEvent_1gtt030" targetRef="Task_0npfejk" />
    <bpmn:sequenceFlow id="SequenceFlow_0uftjt5" sourceRef="Task_0npfejk" targetRef="Task_03fw2nn" />
    <bpmn:sequenceFlow id="SequenceFlow_0ph8dry" sourceRef="Task_1t6cbua" targetRef="ExclusiveGateway_09461ow" />
    <bpmn:sequenceFlow id="SequenceFlow_0w88pvx" name="Tidak" sourceRef="ExclusiveGateway_09461ow" targetRef="Task_0l9nh3t">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!payment_success}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_1yyf6il" sourceRef="Task_0l9nh3t" targetRef="ExclusiveGateway_10i0yyv" />
    <bpmn:sequenceFlow id="SequenceFlow_14qst42" sourceRef="Task_0fydn7d" targetRef="EndEvent_1o71zjf" />
    <bpmn:sequenceFlow id="SequenceFlow_16fsge3" name="Ya" sourceRef="ExclusiveGateway_09461ow" targetRef="Task_0fydn7d">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${payment_success}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_1pm02ma" name="Ya" sourceRef="ExclusiveGateway_10i0yyv" targetRef="Task_03fw2nn">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${retry}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_0niwhzd" name="Tidak" sourceRef="ExclusiveGateway_10i0yyv" targetRef="EndEvent_1o71zjf">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!retry}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:startEvent id="StartEvent_1gtt030" name="Pesanan tiket diterima">
      <bpmn:outgoing>SequenceFlow_16bd1x7</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:serviceTask id="Task_0npfejk" name="Membuat pesanan" camunda:type="external" camunda:topic="create-order">
      <bpmn:incoming>SequenceFlow_16bd1x7</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0uftjt5</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:task id="Task_0fydn7d" name="Menerima tiket">
      <bpmn:incoming>SequenceFlow_16fsge3</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_14qst42</bpmn:outgoing>
    </bpmn:task>
    <bpmn:receiveTask id="Task_1t6cbua" name="Menerima hasil pembayaran">
      <bpmn:outgoing>SequenceFlow_0ph8dry</bpmn:outgoing>
    </bpmn:receiveTask>
    <bpmn:intermediateThrowEvent id="IntermediateThrowEvent_06egu93">
      <bpmn:incoming>SequenceFlow_190mrgl</bpmn:incoming>
      <bpmn:messageEventDefinition />
    </bpmn:intermediateThrowEvent>
    <bpmn:sequenceFlow id="SequenceFlow_190mrgl" sourceRef="Task_03fw2nn" targetRef="IntermediateThrowEvent_06egu93" />
  </bpmn:process>
  <bpmn:process id="Process_0hpcy7g" isExecutable="false" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_1hs8648">
      <bpmndi:BPMNShape id="Participant_1uw6mwb_di" bpmnElement="Participant_1uw6mwb" isHorizontal="true">
        <dc:Bounds x="140" y="357" width="1430" height="313" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_0kkvo4a_di" bpmnElement="Lane_0kkvo4a" isHorizontal="true">
        <dc:Bounds x="170" y="357" width="1400" height="165" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_1ydkhpd_di" bpmnElement="Lane_1ydkhpd" isHorizontal="true">
        <dc:Bounds x="170" y="522" width="1400" height="148" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="StartEvent_1gtt030_di" bpmnElement="StartEvent_1gtt030">
        <dc:Bounds x="262" y="422" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="247" y="465" width="68" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_16bd1x7_di" bpmnElement="SequenceFlow_16bd1x7">
        <di:waypoint x="298" y="440" />
        <di:waypoint x="430" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_1g15bs5_di" bpmnElement="Task_03fw2nn">
        <dc:Bounds x="580" y="560" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0uftjt5_di" bpmnElement="SequenceFlow_0uftjt5">
        <di:waypoint x="530" y="440" />
        <di:waypoint x="560" y="440" />
        <di:waypoint x="560" y="600" />
        <di:waypoint x="580" y="600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_07xny93_di" bpmnElement="Participant_07xny93" isHorizontal="true">
        <dc:Bounds x="140" y="80" width="1070" height="250" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_09461ow_di" bpmnElement="ExclusiveGateway_09461ow" isMarkerVisible="true">
        <dc:Bounds x="965" y="415" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="959" y="385" width="63" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0ph8dry_di" bpmnElement="SequenceFlow_0ph8dry">
        <di:waypoint x="890" y="440" />
        <di:waypoint x="965" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Task_0l9nh3t_di" bpmnElement="Task_0l9nh3t">
        <dc:Bounds x="1200" y="400" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0w88pvx_di" bpmnElement="SequenceFlow_0w88pvx">
        <di:waypoint x="1015" y="440" />
        <di:waypoint x="1200" y="440" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1094" y="422" width="28" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_10i0yyv_di" bpmnElement="ExclusiveGateway_10i0yyv" isMarkerVisible="true">
        <dc:Bounds x="1225" y="575" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1279" y="573" width="62" height="53" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1yyf6il_di" bpmnElement="SequenceFlow_1yyf6il">
        <di:waypoint x="1250" y="480" />
        <di:waypoint x="1250" y="575" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Task_0fydn7d_di" bpmnElement="Task_0fydn7d">
        <dc:Bounds x="940" y="560" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_1o71zjf_di" bpmnElement="EndEvent_1o71zjf">
        <dc:Bounds x="1092" y="582" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_14qst42_di" bpmnElement="SequenceFlow_14qst42">
        <di:waypoint x="1040" y="600" />
        <di:waypoint x="1092" y="600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_16fsge3_di" bpmnElement="SequenceFlow_16fsge3">
        <di:waypoint x="990" y="465" />
        <di:waypoint x="990" y="560" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="999" y="493" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1pm02ma_di" bpmnElement="SequenceFlow_1pm02ma">
        <di:waypoint x="1250" y="625" />
        <di:waypoint x="1250" y="660" />
        <di:waypoint x="630" y="660" />
        <di:waypoint x="630" y="640" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1173" y="642" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0niwhzd_di" bpmnElement="SequenceFlow_0niwhzd">
        <di:waypoint x="1225" y="600" />
        <di:waypoint x="1128" y="600" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1163" y="582" width="28" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_0c8krzd_di" bpmnElement="Task_0npfejk">
        <dc:Bounds x="430" y="400" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ReceiveTask_1bmsmrk_di" bpmnElement="Task_1t6cbua">
        <dc:Bounds x="790" y="400" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="MessageFlow_1cb518o_di" bpmnElement="MessageFlow_1cb518o">
        <di:waypoint x="840" y="330" />
        <di:waypoint x="840" y="400" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="IntermediateThrowEvent_1ufjez5_di" bpmnElement="IntermediateThrowEvent_06egu93">
        <dc:Bounds x="712" y="582" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_190mrgl_di" bpmnElement="SequenceFlow_190mrgl">
        <di:waypoint x="680" y="600" />
        <di:waypoint x="712" y="600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="MessageFlow_01s67kx_di" bpmnElement="MessageFlow_01s67kx">
        <di:waypoint x="730" y="582" />
        <di:waypoint x="730" y="330" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
